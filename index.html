<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apna Shop - Professional Online Store</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom styles */
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #10b981;
        }
        
        .product-card {
            transition: all 0.3s ease;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .admin-link {
            position: fixed;
            top: 0;
            right: 0;
            opacity: 0.05;
            width: 50px;
            height: 50px;
            cursor: pointer;
            z-index: 9999;
            background-color: #3b82f6;
        }
        
        .admin-link:hover {
            opacity: 0.1;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        .slide-up {
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        
        /* Custom checkbox */
        .checkbox-container {
            display: block;
            position: relative;
            padding-left: 35px;
            margin-bottom: 12px;
            cursor: pointer;
            font-size: 16px;
            user-select: none;
        }
        
        .checkbox-container input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }
        
        .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            height: 25px;
            width: 25px;
            background-color: #eee;
            border-radius: 4px;
        }
        
        .checkbox-container:hover input ~ .checkmark {
            background-color: #ccc;
        }
        
        .checkbox-container input:checked ~ .checkmark {
            background-color: #10b981;
        }
        
        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }
        
        .checkbox-container input:checked ~ .checkmark:after {
            display: block;
        }
        
        .checkbox-container .checkmark:after {
            left: 9px;
            top: 5px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 3px 3px 0;
            transform: rotate(45deg);
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Hidden Admin Link -->
    <div class="admin-link" id="adminLink" title="Admin Access"></div>

    <!-- Customer WhatsApp Modal -->
    <div id="whatsappModal" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md slide-up">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">Complete Your Order</h2>
                    <button onclick="closeWhatsAppModal()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="mb-6">
                    <p class="text-gray-600 mb-4">Please provide your WhatsApp number to receive order confirmation and updates:</p>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Your WhatsApp Number:</label>
                            <input type="tel" id="customerWhatsApp" 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                   placeholder="919876543210"
                                   pattern="[0-9]{10,12}"
                                   required>
                            <p class="text-gray-500 text-sm mt-1">Enter your WhatsApp number with country code (without +)</p>
                            <p class="text-red-500 text-sm mt-1 hidden" id="numberError">Please enter a valid WhatsApp number (10-12 digits)</p>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 mb-2">Your Name (Optional):</label>
                            <input type="text" id="customerName" 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                   placeholder="Enter your name">
                        </div>
                        
                        <div class="flex items-start">
                            <label class="checkbox-container text-gray-700">
                                <input type="checkbox" id="saveNumber" checked>
                                <span class="checkmark"></span>
                                Save my number for future orders
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3">
                    <button onclick="closeWhatsAppModal()" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">Cancel</button>
                    <button onclick="sendWhatsAppOrder()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center">
                        <i class="fab fa-whatsapp mr-2 text-xl"></i>Send Order
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Order Summary Modal -->
    <div id="orderSummaryModal" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md slide-up">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">Order Summary</h2>
                    <button onclick="closeOrderSummary()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="mb-6">
                    <div id="orderSummaryContent" class="bg-gray-50 p-4 rounded-lg mb-4 max-h-64 overflow-y-auto">
                        <!-- Order items will be displayed here -->
                    </div>
                    
                    <div class="flex justify-between items-center border-t pt-4">
                        <span class="text-lg font-semibold text-gray-800">Total Amount:</span>
                        <span id="orderTotalAmount" class="text-2xl font-bold text-green-600">‚Çπ0</span>
                    </div>
                </div>
                
                <div class="flex justify-end">
                    <button onclick="proceedToWhatsApp()" class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center">
                        <i class="fab fa-whatsapp mr-2 text-xl"></i>Proceed to WhatsApp
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="adminModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md fade-in">
            <div class="p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Admin Login</h2>
                <div class="mb-6">
                    <label class="block text-gray-700 mb-2">Enter Password:</label>
                    <input type="password" id="adminPassword" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter admin password">
                    <p class="text-red-500 text-sm mt-2 hidden" id="passwordError">Incorrect password!</p>
                </div>
                <div class="flex justify-end space-x-3">
                    <button onclick="closeAdminModal()" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">Cancel</button>
                    <button onclick="loginAdmin()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Login</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="fixed inset-0 bg-white z-50 overflow-y-auto hidden no-scrollbar">
        <div class="min-h-screen p-4 md:p-6">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800">Admin Panel</h1>
                    <p class="text-gray-600">Manage your online store</p>
                </div>
                <button onclick="closeAdminPanel()" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
                    <i class="fas fa-times mr-2"></i>Close
                </button>
            </div>
            
            <div class="mb-6">
                <div class="flex border-b overflow-x-auto">
                    <button id="shopSettingsTab" class="px-4 py-2 font-medium border-b-2 border-blue-600 text-blue-600 whitespace-nowrap" onclick="showTab('shopSettings')">Shop Settings</button>
                    <button id="productsTab" class="px-4 py-2 font-medium text-gray-600 hover:text-blue-600 whitespace-nowrap" onclick="showTab('products')">Products</button>
                    <button id="ordersTab" class="px-4 py-2 font-medium text-gray-600 hover:text-blue-600 whitespace-nowrap" onclick="showTab('orders')">Orders</button>
                    <button id="customersTab" class="px-4 py-2 font-medium text-gray-600 hover:text-blue-600 whitespace-nowrap" onclick="showTab('customers')">Customers</button>
                </div>
            </div>
            
            <!-- Shop Settings Tab -->
            <div id="shopSettings" class="tab-content">
                <div class="bg-white rounded-xl shadow p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Shop Settings</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Shop Name:</label>
                            <input type="text" id="shopNameInput" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Owner WhatsApp Number:</label>
                            <input type="text" id="whatsappNumberInput" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <p class="text-gray-500 text-sm mt-1">This number will receive customer orders</p>
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Shop Tagline:</label>
                            <input type="text" id="shopTaglineInput" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <button onclick="saveShopSettings()" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                            <i class="fas fa-save mr-2"></i>Save Settings
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Products Tab -->
            <div id="products" class="tab-content hidden">
                <div class="bg-white rounded-xl shadow p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Add New Product</h2>
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 mb-2">Product Name:*</label>
                                <input type="text" id="newProductName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2">Price (‚Çπ):*</label>
                                <input type="number" id="newProductPrice" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" min="0" step="0.01" required>
                            </div>
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Description:*</label>
                            <textarea id="newProductDesc" rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 mb-2">Category:</label>
                                <input type="text" id="newProductCategory" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g., Electronics, Clothing">
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2">Image URL:</label>
                                <input type="text" id="newProductImage" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="images/product.jpg">
                            </div>
                        </div>
                        <button onclick="addNewProduct()" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            <i class="fas fa-plus mr-2"></i>Add Product
                        </button>
                        <p class="text-gray-500 text-sm mt-2">* Required fields</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow p-6">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4">
                        <h2 class="text-xl font-bold text-gray-800">Manage Products (<span id="productCount">0</span> products)</h2>
                        <div class="flex space-x-2">
                            <button onclick="exportProducts()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
                                <i class="fas fa-download mr-2"></i>Export
                            </button>
                            <button onclick="clearAllProducts()" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
                                <i class="fas fa-trash mr-2"></i>Clear All
                            </button>
                        </div>
                    </div>
                    <div id="adminProductList" class="space-y-4">
                        <!-- Products will be loaded here -->
                    </div>
                </div>
            </div>
            
            <!-- Orders Tab -->
            <div id="orders" class="tab-content hidden">
                <div class="bg-white rounded-xl shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-gray-800">Recent Orders</h2>
                        <button onclick="exportOrders()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
                            <i class="fas fa-download mr-2"></i>Export Orders
                        </button>
                    </div>
                    <div id="ordersList" class="space-y-4">
                        <!-- Orders will be loaded here -->
                    </div>
                </div>
            </div>
            
            <!-- Customers Tab -->
            <div id="customers" class="tab-content hidden">
                <div class="bg-white rounded-xl shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-gray-800">Customer Database (<span id="customerCount">0</span> customers)</h2>
                        <button onclick="exportCustomers()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
                            <i class="fas fa-download mr-2"></i>Export Customers
                        </button>
                    </div>
                    <div id="customersList" class="space-y-4">
                        <!-- Customers will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Shop Interface -->
    <div class="min-h-screen">
        <!-- Header -->
        <header class="bg-gradient-to-r from-blue-600 to-blue-800 text-white shadow-lg">
            <div class="container mx-auto px-4 py-6">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div class="text-center md:text-left mb-4 md:mb-0">
                        <h1 id="shopTitle" class="text-3xl font-bold">Apna Shop</h1>
                        <p id="shopTagline" class="text-blue-100 mt-1">Professional Online Store</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="text-right hidden md:block">
                            <p class="text-blue-100">Direct WhatsApp Orders</p>
                            <p class="font-semibold">No Login Required</p>
                        </div>
                        <div class="relative">
                            <i class="fas fa-shopping-cart text-2xl text-white"></i>
                            <span id="cartBadge" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Cart Summary -->
        <div class="container mx-auto px-4 py-4">
            <div class="bg-white rounded-xl shadow p-4">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div class="mb-3 md:mb-0 md:mr-4">
                        <h2 class="text-lg font-semibold text-gray-800">Your Shopping Cart</h2>
                        <p id="cartSummary" class="text-gray-600">No items in cart</p>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="viewOrderSummary()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700" id="viewSummaryBtn" disabled>
                            <i class="fas fa-eye mr-2"></i>View Summary
                        </button>
                        <button onclick="clearCart()" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50" id="clearCartBtn" disabled>
                            <i class="fas fa-trash mr-2"></i>Clear
                        </button>
                    </div>
                </div>
                
                <!-- Quick Add Products -->
                <div class="mt-4 pt-4 border-t border-gray-200">
                    <p class="text-gray-700 mb-2 font-medium">Quick Add:</p>
                    <div id="quickAddProducts" class="flex space-x-2 overflow-x-auto pb-2">
                        <!-- Quick add buttons will be added here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Products Section -->
        <main class="container mx-auto px-4 py-8">
            <div class="mb-8 text-center">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">Our Products</h2>
                <p class="text-gray-600">Select products and order directly via WhatsApp</p>
            </div>
            
            <div id="productsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Products will be loaded here dynamically -->
            </div>
            
            <div id="emptyProducts" class="text-center py-12 hidden">
                <div class="bg-white rounded-xl shadow p-8 max-w-md mx-auto">
                    <i class="fas fa-box-open text-6xl text-gray-300 mb-4"></i>
                    <h3 class="text-xl font-semibold text-gray-700 mb-2">No Products Available</h3>
                    <p class="text-gray-500">Products will be added soon by the admin.</p>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-gray-800 text-white mt-12">
            <div class="container mx-auto px-4 py-8">
                <div class="text-center">
                    <p class="text-lg" id="footerTagline">Professional Online Shopping Experience</p>
                    <p class="text-gray-400 mt-2">No registration needed ‚Ä¢ Direct WhatsApp orders ‚Ä¢ Secure & Fast</p>
                    <div class="mt-6 pt-6 border-t border-gray-700">
                        <p class="font-medium">Admin: Tamir Ali | ‡§Ö‡§ï‡•ç‡§≤ ‡§ï‡•Ä ‡§ú‡•Ä‡§§ - ‡§è‡§ï ‡§ñ‡•Å‡§¶‡§æ ‡§ï‡§æ ‡§Æ‡§æ‡§∞‡•ç‡§ó</p>
                        <p class="text-gray-400 text-sm mt-1">All data stored locally ‚Ä¢ No external database</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // ==================== INITIALIZATION ====================
        let shopData = {
            shopName: "Apna Shop",
            whatsappNumber: "918797221991",
            shopTagline: "Professional Online Store",
            products: [],
            orders: [],
            customers: []
        };

        let cart = {};
        let currentAdminTab = 'shopSettings';
        let currentOrderSummary = null;

        // ==================== DOM ELEMENTS ====================
        const dom = {
            adminLink: document.getElementById('adminLink'),
            whatsappModal: document.getElementById('whatsappModal'),
            orderSummaryModal: document.getElementById('orderSummaryModal'),
            adminModal: document.getElementById('adminModal'),
            adminPanel: document.getElementById('adminPanel'),
            productsContainer: document.getElementById('productsContainer'),
            emptyProducts: document.getElementById('emptyProducts'),
            cartSummary: document.getElementById('cartSummary'),
            viewSummaryBtn: document.getElementById('viewSummaryBtn'),
            shopTitle: document.getElementById('shopTitle'),
            shopTagline: document.getElementById('shopTagline'),
            footerTagline: document.getElementById('footerTagline'),
            cartBadge: document.getElementById('cartBadge'),
            clearCartBtn: document.getElementById('clearCartBtn'),
            productCount: document.getElementById('productCount'),
            customerCount: document.getElementById('customerCount'),
            quickAddProducts: document.getElementById('quickAddProducts')
        };

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', function() {
            initShop();
            dom.adminLink.addEventListener('click', openAdminModal);
            loadCustomerPreferences();
        });

        function initShop() {
            loadShopData();
            loadCart();
            renderProducts();
            updateCartUI();
            updateQuickAddProducts();
        }

        // ==================== DATA MANAGEMENT ====================
        function loadShopData() {
            const savedData = localStorage.getItem('apnaShopData');
            if (savedData) {
                shopData = JSON.parse(savedData);
            } else {
                // Default sample products
                shopData.products = [
                    {
                        id: 1,
                        name: "Premium Cotton T-Shirt",
                        description: "100% Cotton, Comfortable Fit, All Sizes Available",
                        price: 599,
                        category: "Clothing",
                        image: "images/tshirt.jpg",
                        dateAdded: new Date().toISOString()
                    },
                    {
                        id: 2,
                        name: "Wireless Bluetooth Headphones",
                        description: "Bluetooth 5.0, Noise Cancellation, 30hr Battery",
                        price: 2499,
                        category: "Electronics",
                        image: "images/headphones.jpg",
                        dateAdded: new Date().toISOString()
                    },
                    {
                        id: 3,
                        name: "Smart Fitness Watch",
                        description: "Heart Rate Monitor, Sleep Tracking, Water Resistant",
                        price: 3999,
                        category: "Electronics",
                        image: "images/watch.jpg",
                        dateAdded: new Date().toISOString()
                    }
                ];
                saveShopData();
            }
            
            updateShopUI();
        }

        function saveShopData() {
            localStorage.setItem('apnaShopData', JSON.stringify(shopData));
        }

        function loadCart() {
            const savedCart = localStorage.getItem('apnaShopCart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
            }
        }

        function saveCart() {
            localStorage.setItem('apnaShopCart', JSON.stringify(cart));
        }

        function loadCustomerPreferences() {
            const savedCustomer = localStorage.getItem('apnaShopCustomer');
            if (savedCustomer) {
                const customer = JSON.parse(savedCustomer);
                document.getElementById('customerWhatsApp').value = customer.whatsapp || '';
                document.getElementById('customerName').value = customer.name || '';
            }
        }

        function saveCustomerPreferences(whatsapp, name) {
            const customer = {
                whatsapp: whatsapp,
                name: name,
                lastOrder: new Date().toISOString()
            };
            localStorage.setItem('apnaShopCustomer', JSON.stringify(customer));
            
            // Also add to customer database
            addCustomerToDatabase(whatsapp, name);
        }

        function addCustomerToDatabase(whatsapp, name) {
            // Check if customer already exists
            const existingCustomer = shopData.customers.find(c => c.whatsapp === whatsapp);
            
            if (!existingCustomer) {
                shopData.customers.push({
                    id: Date.now(),
                    whatsapp: whatsapp,
                    name: name || '',
                    firstOrder: new Date().toISOString(),
                    lastOrder: new Date().toISOString(),
                    totalOrders: 0,
                    totalSpent: 0
                });
                saveShopData();
            } else {
                // Update existing customer
                existingCustomer.lastOrder = new Date().toISOString();
                existingCustomer.name = name || existingCustomer.name;
                saveShopData();
            }
        }

        // ==================== SHOP UI FUNCTIONS ====================
        function updateShopUI() {
            dom.shopTitle.textContent = shopData.shopName;
            dom.shopTagline.textContent = shopData.shopTagline;
            dom.footerTagline.textContent = shopData.shopTagline;
            
            if (dom.adminPanel && !dom.adminPanel.classList.contains('hidden')) {
                document.getElementById('shopNameInput').value = shopData.shopName;
                document.getElementById('whatsappNumberInput').value = shopData.whatsappNumber;
                document.getElementById('shopTaglineInput').value = shopData.shopTagline;
            }
        }

        function updateQuickAddProducts() {
            dom.quickAddProducts.innerHTML = '';
            
            // Show only top 5 products for quick add
            const topProducts = shopData.products.slice(0, 5);
            
            topProducts.forEach(product => {
                const button = document.createElement('button');
                button.className = 'px-3 py-1 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200 whitespace-nowrap text-sm';
                button.innerHTML = `<i class="fas fa-plus mr-1"></i>${product.name}`;
                button.onclick = () => {
                    updateQuantity(product.id, 1);
                    // Visual feedback
                    button.classList.add('bg-green-100', 'text-green-800');
                    setTimeout(() => {
                        button.classList.remove('bg-green-100', 'text-green-800');
                    }, 500);
                };
                button.title = `Add ${product.name} to cart`;
                dom.quickAddProducts.appendChild(button);
            });
        }

        function renderProducts() {
            dom.productsContainer.innerHTML = '';
            
            if (shopData.products.length === 0) {
                dom.emptyProducts.classList.remove('hidden');
                return;
            }
            
            dom.emptyProducts.classList.add('hidden');
            
            shopData.products.forEach(product => {
                const quantity = cart[product.id] || 0;
                const productElement = document.createElement('div');
                productElement.className = 'product-card bg-white rounded-xl shadow overflow-hidden';
                productElement.innerHTML = `
                    <div class="h-48 bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center overflow-hidden">
                        ${product.image ? 
                            `<img src="${product.image}" alt="${product.name}" class="h-full w-full object-cover hover:scale-105 transition-transform duration-300">` :
                            `<i class="fas fa-box text-6xl text-gray-400"></i>`
                        }
                        ${product.category ? `<span class="absolute top-3 left-3 bg-blue-600 text-white text-xs px-2 py-1 rounded">${product.category}</span>` : ''}
                    </div>
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-xl font-bold text-gray-800">${product.name}</h3>
                            <span class="text-2xl font-bold text-green-600">‚Çπ${product.price}</span>
                        </div>
                        <p class="text-gray-600 mb-4 text-sm">${product.description}</p>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-2">
                                <button onclick="updateQuantity(${product.id}, -1)" class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors">
                                    <i class="fas fa-minus text-gray-700"></i>
                                </button>
                                <span id="quantity-${product.id}" class="font-semibold w-8 text-center">${quantity}</span>
                                <button onclick="updateQuantity(${product.id}, 1)" class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors">
                                    <i class="fas fa-plus text-gray-700"></i>
                                </button>
                            </div>
                            <button onclick="updateQuantity(${product.id}, 1)" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                                <i class="fas fa-cart-plus mr-2"></i>Add to Cart
                            </button>
                        </div>
                    </div>
                `;
                dom.productsContainer.appendChild(productElement);
            });
        }

        function updateQuantity(productId, change) {
            if (!cart[productId]) cart[productId] = 0;
            
            cart[productId] += change;
            if (cart[productId] < 0) cart[productId] = 0;
            
            const quantityElement = document.getElementById(`quantity-${productId}`);
            if (quantityElement) {
                quantityElement.textContent = cart[productId];
                quantityElement.classList.add('text-blue-600', 'font-bold');
                setTimeout(() => {
                    quantityElement.classList.remove('text-blue-600', 'font-bold');
                }, 300);
            }
            
            updateCartUI();
        }

        function updateCartUI() {
            let totalItems = 0;
            let totalPrice = 0;
            
            for (const productId in cart) {
                const quantity = cart[productId];
                if (quantity > 0) {
                    const product = shopData.products.find(p => p.id == productId);
                    if (product) {
                        totalItems += quantity;
                        totalPrice += quantity * product.price;
                    }
                }
            }
            
            // Update cart badge
            if (totalItems > 0) {
                dom.cartBadge.textContent = totalItems > 99 ? '99+' : totalItems;
                dom.cartBadge.classList.remove('hidden');
                dom.viewSummaryBtn.disabled = false;
                dom.clearCartBtn.disabled = false;
            } else {
                dom.cartBadge.classList.add('hidden');
                dom.viewSummaryBtn.disabled = true;
                dom.clearCartBtn.disabled = true;
            }
            
            // Update cart summary
            if (totalItems === 0) {
                dom.cartSummary.textContent = 'Your cart is empty';
                dom.viewSummaryBtn.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                dom.cartSummary.textContent = `${totalItems} item${totalItems > 1 ? 's' : ''} ‚Ä¢ Total: ‚Çπ${totalPrice}`;
                dom.viewSummaryBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
            
            saveCart();
        }

        function clearCart() {
            if (Object.keys(cart).length === 0) return;
            
            if (confirm('Are you sure you want to clear all items from your cart?')) {
                cart = {};
                updateCartUI();
                renderProducts();
                showNotification('Cart cleared successfully!', 'success');
            }
        }

        // ==================== ORDER SUMMARY ====================
        function viewOrderSummary() {
            let orderItems = [];
            let totalPrice = 0;
            
            for (const productId in cart) {
                const quantity = cart[productId];
                if (quantity > 0) {
                    const product = shopData.products.find(p => p.id == productId);
                    if (product) {
                        const itemTotal = quantity * product.price;
                        orderItems.push({
                            product: product,
                            quantity: quantity,
                            itemTotal: itemTotal
                        });
                        totalPrice += itemTotal;
                    }
                }
            }
            
            if (orderItems.length === 0) {
                showNotification('Your cart is empty!', 'error');
                return;
            }
            
            currentOrderSummary = { items: orderItems, total: totalPrice };
            
            // Display order summary
            const orderSummaryContent = document.getElementById('orderSummaryContent');
            orderSummaryContent.innerHTML = '';
            
            orderItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'mb-3 pb-3 border-b border-gray-200 last:border-0';
                itemElement.innerHTML = `
                    <div class="flex justify-between">
                        <div class="flex-1">
                            <p class="font-semibold text-gray-800">${item.product.name}</p>
                            <p class="text-gray-600 text-sm">Quantity: ${item.quantity}</p>
                        </div>
                        <div class="text-right">
                            <p class="text-gray-800">‚Çπ${item.itemTotal}</p>
                            <p class="text-gray-500 text-sm">‚Çπ${item.product.price} √ó ${item.quantity}</p>
                        </div>
                    </div>
                `;
                orderSummaryContent.appendChild(itemElement);
            });
            
            document.getElementById('orderTotalAmount').textContent = `‚Çπ${totalPrice}`;
            
            // Show modal
            dom.orderSummaryModal.classList.remove('hidden');
            dom.orderSummaryModal.classList.add('flex');
        }

        function closeOrderSummary() {
            dom.orderSummaryModal.classList.add('hidden');
            dom.orderSummaryModal.classList.remove('flex');
        }

        function proceedToWhatsApp() {
            closeOrderSummary();
            openWhatsAppModal();
        }

        // ==================== WHATSAPP ORDER ====================
        function openWhatsAppModal() {
            dom.whatsappModal.classList.remove('hidden');
            dom.whatsappModal.classList.add('flex');
            document.getElementById('customerWhatsApp').focus();
        }

        function closeWhatsAppModal() {
            dom.whatsappModal.classList.add('hidden');
            dom.whatsappModal.classList.remove('flex');
            document.getElementById('numberError').classList.add('hidden');
        }

        function sendWhatsAppOrder() {
            const customerWhatsApp = document.getElementById('customerWhatsApp').value.trim();
            const customerName = document.getElementById('customerName').value.trim();
            const saveNumber = document.getElementById('saveNumber').checked;
            const numberError = document.getElementById('numberError');
            
            // Validate WhatsApp number
            if (!customerWhatsApp || !/^\d{10,12}$/.test(customerWhatsApp)) {
                numberError.classList.remove('hidden');
                document.getElementById('customerWhatsApp').classList.add('border-red-500');
                return;
            }
            
            numberError.classList.add('hidden');
            document.getElementById('customerWhatsApp').classList.remove('border-red-500');
            
            // Save customer preferences if requested
            if (saveNumber) {
                saveCustomerPreferences(customerWhatsApp, customerName);
            }
            
            // Generate WhatsApp message
            const whatsappMessage = generateWhatsAppMessage(customerName);
            
            // Encode for WhatsApp
            const encodedMessage = encodeURIComponent(whatsappMessage);
            const whatsappUrl = `https://wa.me/${shopData.whatsappNumber}?text=${encodedMessage}`;
            
            // Also send a copy to customer if they provided their number
            const customerMessage = generateCustomerOrderSummary(customerName);
            const customerEncoded = encodeURIComponent(customerMessage);
            const customerWhatsappUrl = `https://wa.me/${customerWhatsApp}?text=${customerEncoded}`;
            
            // Save order
            saveOrderToDatabase(customerWhatsApp, customerName);
            
            // Open WhatsApp for shop owner
            window.open(whatsappUrl, '_blank');
            
            // Open WhatsApp for customer after a delay
            setTimeout(() => {
                if (confirm('Do you want to send order summary to your WhatsApp?')) {
                    window.open(customerWhatsappUrl, '_blank');
                }
            }, 500);
            
            // Clear cart
            cart = {};
            updateCartUI();
            renderProducts();
            
            closeWhatsAppModal();
            showNotification('Order placed successfully!', 'success');
        }

        function generateWhatsAppMessage(customerName) {
            let message = `üõí *NEW ORDER - ${shopData.shopName}*\n\n`;
            
            if (customerName) {
                message += `üë§ *Customer Name:* ${customerName}\n`;
            }
            
            message += `üìû *Customer WhatsApp:* https://wa.me/${document.getElementById('customerWhatsApp').value.trim()}\n\n`;
            message += `üì¶ *Order Details:*\n`;
            
            let totalPrice = 0;
            
            for (const productId in cart) {
                const quantity = cart[productId];
                if (quantity > 0) {
                    const product = shopData.products.find(p => p.id == productId);
                    if (product) {
                        const itemTotal = quantity * product.price;
                        message += `\n‚Ä¢ ${product.name}\n`;
                        message += `  Quantity: ${quantity}\n`;
                        message += `  Price: ‚Çπ${product.price} √ó ${quantity} = ‚Çπ${itemTotal}\n`;
                        totalPrice += itemTotal;
                    }
                }
            }
            
            message += `\nüí∞ *Order Total: ‚Çπ${totalPrice}*\n\n`;
            message += `‚è∞ *Order Time:* ${new Date().toLocaleString()}\n\n`;
            message += `üìã *Order ID:* ${Date.now().toString().slice(-6)}\n\n`;
            message += `_Please contact customer for delivery details._`;
            
            return message;
        }

        function generateCustomerOrderSummary(customerName) {
            let message = `‚úÖ *Order Confirmation - ${shopData.shopName}*\n\n`;
            
            if (customerName) {
                message += `Dear ${customerName},\n\n`;
            }
            
            message += `Thank you for your order!\n\n`;
            message += `üìã *Your Order Summary:*\n`;
            
            let totalPrice = 0;
            
            for (const productId in cart) {
                const quantity = cart[productId];
                if (quantity > 0) {
                    const product = shopData.products.find(p => p.id == productId);
                    if (product) {
                        const itemTotal = quantity * product.price;
                        message += `\n‚Ä¢ ${product.name} (Qty: ${quantity}) - ‚Çπ${itemTotal}`;
                        totalPrice += itemTotal;
                    }
                }
            }
            
            message += `\n\nüí∞ *Total Amount: ‚Çπ${totalPrice}*\n\n`;
            message += `üìû *Shop Contact:* https://wa.me/${shopData.whatsappNumber}\n\n`;
            message += `‚è∞ *Order Time:* ${new Date().toLocaleString()}\n`;
            message += `üìã *Order ID:* ${Date.now().toString().slice(-6)}\n\n`;
            message += `We will contact you shortly for delivery details.\n`;
            message += `Thank you for shopping with us! üéâ`;
            
            return message;
        }

        function saveOrderToDatabase(customerWhatsApp, customerName) {
            let orderItems = [];
            let totalPrice = 0;
            
            for (const productId in cart) {
                const quantity = cart[productId];
                if (quantity > 0) {
                    const product = shopData.products.find(p => p.id == productId);
                    if (product) {
                        orderItems.push({
                            productId: product.id,
                            productName: product.name,
                            quantity: quantity,
                            price: product.price,
                            total: quantity * product.price
                        });
                        totalPrice += quantity * product.price;
                    }
                }
            }
            
            const order = {
                id: Date.now(),
                customerWhatsApp: customerWhatsApp,
                customerName: customerName || 'Not provided',
                items: orderItems,
                total: totalPrice,
                date: new Date().toISOString(),
                status: 'pending'
            };
            
            shopData.orders.unshift(order);
            saveShopData();
            
            // Update customer stats
            updateCustomerStats(customerWhatsApp, totalPrice);
        }

        function updateCustomerStats(whatsapp, orderTotal) {
            const customer = shopData.customers.find(c => c.whatsapp === whatsapp);
            if (customer) {
                customer.totalOrders = (customer.totalOrders || 0) + 1;
                customer.totalSpent = (customer.totalSpent || 0) + orderTotal;
                customer.lastOrder = new Date().toISOString();
                saveShopData();
            }
        }

        // ==================== ADMIN FUNCTIONS ====================
        function openAdminModal() {
            dom.adminModal.classList.remove('hidden');
            dom.adminModal.classList.add('flex');
            document.getElementById('adminPassword').focus();
        }

        function closeAdminModal() {
            dom.adminModal.classList.add('hidden');
            dom.adminModal.classList.remove('flex');
            document.getElementById('passwordError').classList.add('hidden');
            document.getElementById('adminPassword').value = '';
        }

        function loginAdmin() {
            const password = document.getElementById('adminPassword').value;
            const errorElement = document.getElementById('passwordError');
            
            if (password === 'tamir@lI00769') {
                errorElement.classList.add('hidden');
                closeAdminModal();
                openAdminPanel();
            } else {
                errorElement.classList.remove('hidden');
                document.getElementById('adminPassword').classList.add('border-red-500');
                setTimeout(() => {
                    document.getElementById('adminPassword').classList.remove('border-red-500');
                }, 1000);
            }
        }

        function openAdminPanel() {
            dom.adminPanel.classList.remove('hidden');
            loadAdminProducts();
            loadOrders();
            loadCustomers();
            showTab(currentAdminTab);
        }

        function closeAdminPanel() {
            dom.adminPanel.classList.add('hidden');
        }

        function showTab(tabName) {
            currentAdminTab = tabName;
            
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Update tab buttons
            document.querySelectorAll('[id$="Tab"]').forEach(button => {
                button.classList.remove('border-blue-600', 'text-blue-600');
                button.classList.add('text-gray-600');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.remove('hidden');
            document.getElementById(tabName + 'Tab').classList.add('border-blue-600', 'text-blue-600');
            document.getElementById(tabName + 'Tab').classList.remove('text-gray-600');
        }

        function saveShopSettings() {
            shopData.shopName = document.getElementById('shopNameInput').value.trim() || "Apna Shop";
            shopData.whatsappNumber = document.getElementById('whatsappNumberInput').value.trim() || "918797221991";
            shopData.shopTagline = document.getElementById('shopTaglineInput').value.trim() || "Professional Online Store";
            
            saveShopData();
            updateShopUI();
            
            showNotification('Shop settings saved successfully!', 'success');
        }

        function addNewProduct() {
            const name = document.getElementById('newProductName').value.trim();
            const price = parseFloat(document.getElementById('newProductPrice').value);
            const description = document.getElementById('newProductDesc').value.trim();
            const category = document.getElementById('newProductCategory').value.trim();
            const image = document.getElementById('newProductImage').value.trim();
            
            if (!name || !price || !description) {
                showNotification('Please fill in all required fields (Name, Price, Description)', 'error');
                return;
            }
            
            const newProduct = {
                id: Date.now(),
                name: name,
                description: description,
                price: price,
                category: category || "General",
                image: image || "images/default.jpg",
                dateAdded: new Date().toISOString()
            };
            
            shopData.products.push(newProduct);
            saveShopData();
            
            // Clear form
            document.getElementById('newProductName').value = '';
            document.getElementById('newProductPrice').value = '';
            document.getElementById('newProductDesc').value = '';
            document.getElementById('newProductCategory').value = '';
            document.getElementById('newProductImage').value = '';
            
            // Refresh
            loadAdminProducts();
            renderProducts();
            updateQuickAddProducts();
            
            showNotification('Product added successfully!', 'success');
        }

        function loadAdminProducts() {
            const adminProductList = document.getElementById('adminProductList');
            adminProductList.innerHTML = '';
            dom.productCount.textContent = shopData.products.length;
            
            if (shopData.products.length === 0) {
                adminProductList.innerHTML = '<p class="text-gray-500 text-center py-8">No products added yet.</p>';
                return;
            }
            
            shopData.products.forEach(product => {
                const productElement = document.createElement('div');
                productElement.className = 'bg-gray-50 p-4 rounded-lg border border-gray-200';
                productElement.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-start justify-between">
                                <div>
                                    <h3 class="font-bold text-gray-800">${product.name}</h3>
                                    <p class="text-gray-600 text-sm mt-1">${product.description}</p>
                                </div>
                                <span class="text-green-600 font-bold ml-4">‚Çπ${product.price}</span>
                            </div>
                            <div class="flex items-center mt-2 space-x-3 text-sm">
                                ${product.category ? `<span class="bg-blue-100 text-blue-800 px-2 py-1 rounded">${product.category}</span>` : ''}
                                <span class="text-gray-500">Added: ${new Date(product.dateAdded).toLocaleDateString()}</span>
                            </div>
                        </div>
                        <button onclick="deleteProduct(${product.id})" class="ml-4 px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition-colors" title="Delete Product">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                adminProductList.appendChild(productElement);
            });
        }

        function deleteProduct(productId) {
            if (!confirm('Are you sure you want to delete this product?')) return;
            
            shopData.products = shopData.products.filter(product => product.id !== productId);
            saveShopData();
            loadAdminProducts();
            renderProducts();
            updateQuickAddProducts();
            
            // Remove from cart if present
            if (cart[productId]) {
                delete cart[productId];
                updateCartUI();
            }
            
            showNotification('Product deleted successfully!', 'success');
        }

        function clearAllProducts() {
            if (shopData.products.length === 0) {
                showNotification('No products to clear!', 'info');
                return;
            }
            
            if (confirm('‚ö†Ô∏è WARNING: This will delete ALL products. This action cannot be undone!\n\nAre you sure?')) {
                shopData.products = [];
                saveShopData();
                loadAdminProducts();
                renderProducts();
                updateQuickAddProducts();
                cart = {};
                updateCartUI();
                showNotification('All products cleared!', 'success');
            }
        }

        function loadOrders() {
            const ordersList = document.getElementById('ordersList');
            ordersList.innerHTML = '';
            
            if (shopData.orders.length === 0) {
                ordersList.innerHTML = '<p class="text-gray-500 text-center py-8">No orders yet. Orders will appear here when customers place them.</p>';
                return;
            }
            
            shopData.orders.forEach(order => {
                const orderElement = document.createElement('div');
                orderElement.className = 'bg-gray-50 p-4 rounded-lg border border-gray-200';
                
                const totalItems = order.items.reduce((sum, item) => sum + item.quantity, 0);
                
                orderElement.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <h3 class="font-bold text-gray-800">Order #${order.id.toString().slice(-6)}</h3>
                            <p class="text-gray-600 text-sm">${new Date(order.date).toLocaleString()}</p>
                        </div>
                        <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium">${order.status}</span>
                    </div>
                    <div class="mb-2">
                        <p class="text-gray-700"><strong>Customer:</strong> ${order.customerName}</p>
                        <p class="text-gray-600 text-sm"><strong>WhatsApp:</strong> <a href="https://wa.me/${order.customerWhatsApp}" target="_blank" class="text-blue-600 hover:underline">${order.customerWhatsApp}</a></p>
                    </div>
                    <div class="flex justify-between items-center">
                        <p class="text-gray-700"><strong>Items:</strong> ${totalItems}</p>
                        <p class="text-lg font-bold text-green-600">‚Çπ${order.total}</p>
                    </div>
                `;
                ordersList.appendChild(orderElement);
            });
        }

        function loadCustomers() {
            const customersList = document.getElementById('customersList');
            customersList.innerHTML = '';
            dom.customerCount.textContent = shopData.customers.length;
            
            if (shopData.customers.length === 0) {
                customersList.innerHTML = '<p class="text-gray-500 text-center py-8">No customers yet.</p>';
                return;
            }
            
            shopData.customers.forEach(customer => {
                const customerElement = document.createElement('div');
                customerElement.className = 'bg-gray-50 p-4 rounded-lg border border-gray-200';
                
                customerElement.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center justify-between">
                                <h3 class="font-bold text-gray-800">${customer.name || 'Customer'}</h3>
                                <a href="https://wa.me/${customer.whatsapp}" target="_blank" class="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm">
                                    <i class="fab fa-whatsapp mr-1"></i>Message
                                </a>
                            </div>
                            <p class="text-gray-600 text-sm mt-1">WhatsApp: ${customer.whatsapp}</p>
                            <div class="flex items-center mt-2 space-x-4 text-sm">
                                <span class="text-gray-700"><strong>Orders:</strong> ${customer.totalOrders || 0}</span>
                                <span class="text-gray-700"><strong>Spent:</strong> ‚Çπ${customer.totalSpent || 0}</span>
                            </div>
                            <p class="text-gray-500 text-xs mt-2">Last order: ${new Date(customer.lastOrder).toLocaleDateString()}</p>
                        </div>
                    </div>
                `;
                customersList.appendChild(customerElement);
            });
        }

        // ==================== EXPORT FUNCTIONS ====================
        function exportProducts() {
            const dataStr = JSON.stringify(shopData.products, null, 2);
            downloadJSON(dataStr, `apna-shop-products-${new Date().toISOString().split('T')[0]}.json`);
            showNotification('Products exported successfully!', 'success');
        }

        function exportOrders() {
            const dataStr = JSON.stringify(shopData.orders, null, 2);
            downloadJSON(dataStr, `apna-shop-orders-${new Date().toISOString().split('T')[0]}.json`);
            showNotification('Orders exported successfully!', 'success');
        }

        function exportCustomers() {
            const dataStr = JSON.stringify(shopData.customers, null, 2);
            downloadJSON(dataStr, `apna-shop-customers-${new Date().toISOString().split('T')[0]}.json`);
            showNotification('Customers exported successfully!', 'success');
        }

        function downloadJSON(dataStr, filename) {
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', filename);
            linkElement.click();
        }

        // ==================== HELPER FUNCTIONS ====================
        function showNotification(message, type = 'info') {
            // Remove existing notification
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg text-white z-50 slide-up ${
                type === 'success' ? 'bg-green-600' :
                type === 'error' ? 'bg-red-600' :
                'bg-blue-600'
            }`;
            
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'} mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function formatCurrency(amount) {
            return '‚Çπ' + amount.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
        }
    </script>
</body>
</html>
